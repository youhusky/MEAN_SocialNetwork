!function(){angular.module("TimeWaste").controller("MainController",["$scope","$http","$interval",function(e,o,s){function r(s){var r={};e.user&&(r.following=angular.copy(e.user.following),r.following.push({userId:e.user._id})),console.log(r),o.post("api/waste/get",r).success(function(o){s?e.wastes=o:o.length>e.wastes.length&&(e.incomingWastes=o)})}void 0!==localStorage["User-Data"]&&(e.user=JSON.parse(localStorage["User-Data"]),console.log(e.user)),e.sendWaste=function(s){if(13===s.which){var r={user:e.user.username||e.user.email,userId:e.user._id,userImage:e.user.image,content:e.newWaste};o.post("api/waste/post",r).success(function(o){console.log(o),e.wastes=o}).error(function(e){console.error(e)})}},s(function(){r(!1),e.incomingWastes&&(e.difference=e.incomingWastes.length-e.wastes.length),console.log("this is working")},5e3),e.setNewWastes=function(){e.wastes=angular.copy(e.incomingWastes),e.incomingWastes=void 0},r(!0)}])}();