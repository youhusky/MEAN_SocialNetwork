var User=require("../datasets/users"),fs=require("fs-extra"),path=require("path");module.exports.updatePhoto=function(e,o){var r=e.files.file,a=e.body.userId;console.log("User "+a+" is submitting ",r);var s=new Date,t=r.path,n=path.join(__dirname,"../../uploads/"+a+s+r.name),i="/uploads/"+a+s+r.name;fs.rename(t,n,function(e){e?console.log(e):User.findById(a,function(e,r){var a=r;a.image=i,a.save(function(e){e?(console.log("failed save"),o.json({status:500})):(console.log("save successful"),o.json({status:200}))})})})},module.exports.updateUsername=function(e,o){var r=e.body.username,a=e.body.userId;User.findById(a,function(e,a){var s=a;s.username=r,s.save(function(e){e?(console.log("fail"),o.json({status:500})):(console.log("success"),o.json({status:200}))})})},module.exports.updateBio=function(e,o){var r=e.body.bio,a=e.body.userId;User.findById(a,function(e,a){var s=a;s.bio=r,s.save(function(e){e?(console.log("fail"),o.json({status:500})):(console.log("success"),o.json({status:200}))})})};